# NATS Server Configuration for Local Development
# This configuration demonstrates auth callout setup with username/password authentication

# Server settings
port: 4222
http_port: 8222

# Enable debug logging
debug: true
trace: true

# Authorization configuration with auth callout
authorization {
    # Simple username/password for auth service connection
    # This is the simplest auth mode for local development
    users: [
        {
            user: "auth-service"
            password: "auth-password"
        }
    ]

    # Auth callout configuration
    # The auth-service will handle JWT validation and generate user permissions
    auth_callout {
        # Issuer is the account public key that will sign authorization responses
        # This must match the public key from the signing.key file
        # PLACEHOLDER: Will be replaced by setup script
        issuer: "AABBCCDD"  # Placeholder - replaced by setup.sh with actual account public key

        # Auth users are NATS users allowed to handle auth requests
        # These users connect with username/password or credentials
        auth_users: ["auth-service"]
    }
}
